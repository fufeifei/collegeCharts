$.ajax({type:"get",url:"./data/output.json",async:!0,success:function(dataSourse){function DataX(a){SchoolName=[],MajorCategories=[],ProfessionalCategory=[],ProfessionalName=[],Grade=[];for(var t=0;t<a.length;t++)All.push(a[t]),SchoolName.push(a[t].SchoolName),MajorCategories.push(a[t].MajorCategories),ProfessionalCategory.push(a[t].ProfessionalCategory),ProfessionalName.push(a[t].ProfessionalName),Grade.push(a[t].Grade);$.unique(SchoolName),$.unique(MajorCategories),$.unique(ProfessionalCategory),$.unique(ProfessionalName)}var dataX=[],All=[],Alls=[],SchoolName=[],MajorCategories=[],ProfessionalCategory=[],ProfessionalName=[],Grade=[],Source=[];$.each(dataSourse,function(a,t){dataX.push(t)});for(var i=0;i<dataX.length;i++)Alls.push(dataX[i]);DataX(dataX),$.each(SchoolName,function(a,t){$("#SchoolName").append("<option id="+a+">"+t+"</option>")}),$.each(MajorCategories,function(a,t){$("#MajorCategories").append("<option id="+a+">"+t+"</option>")}),$.each(ProfessionalCategory,function(a,t){$("#ProfessionalCategory").append("<option id="+a+">"+t+"</option>")}),$.each(ProfessionalName,function(a,t){$("#ProfessionalName").append("<option id="+a+">"+t+"</option>")});var m=1;$("select").on("change",function(){Source=[],$("#table tbody").html("");var html=null,This=$(this).attr("id"),Values=[],ValueInput=[],tval=$(this).val(),ThisIndex=$(this).attr("data-index");if(0==ThisIndex){$(this).attr("data-index",m++);for(var i=0;i<All.length;i++)All[i][This]==tval&&(html="<tr><td>"+All[i].ID+"</td><td>"+All[i].SchoolName+"</td><td>"+All[i].MajorCategories+"</td><td>"+All[i].ProfessionalCategory+"</td><td>"+All[i].ProfessionalName+"</td><td>"+All[i].SchoolSystem+"</td><td>"+All[i].Year+"</td><td>"+All[i].Graduate+"</td><td>"+All[i].Student+"</td><td>"+All[i].GradeOne+"</td><td>"+All[i].GradeTwo+"</td><td>"+All[i].GradeThree+"</td><td>"+All[i].GradeFour+"</td></tr>",$("#table tbody").append(html),Source.push(All[i]))}else if(ThisIndex>0){Values=[],ValueInput=[],Source=[];var pushs=[];pushs.push($("[data-index]")),pushs.sort(),$.each(pushs,function(a,t){var e=$(t).attr("id"),o=$(t).attr("data-index");o>ThisIndex?$("#"+e).attr("data-index","0"):o<ThisIndex&&o>=1?(console.log(e),console.log($("#"+e).val()),Values.push(e),ValueInput.push($("#"+e).val())):1==ThisIndex&&(Values.push(This),ValueInput.push($("#"+e).val())),Values.push(e),ValueInput.push(tval),$.unique(Values),$.unique(ValueInput)}),console.log(ValueInput),$.each(Values,function(a,t){console.log(t);for(var e=0;e<Alls.length;e++)for(var o=0;o<ValueInput.length;o++)Alls[e][t]==ValueInput[o]&&(html="<tr><td>"+Alls[e].ID+"</td><td>"+Alls[e].SchoolName+"</td><td>"+Alls[e].MajorCategories+"</td><td>"+Alls[e].ProfessionalCategory+"</td><td>"+Alls[e].ProfessionalName+"</td><td>"+Alls[e].SchoolSystem+"</td><td>"+Alls[e].Year+"</td><td>"+Alls[e].Graduate+"</td><td>"+Alls[e].Student+"</td><td>"+Alls[e].GradeOne+"</td><td>"+Alls[e].GradeTwo+"</td><td>"+Alls[e].GradeThree+"</td><td>"+Alls[e].GradeFour+"</td></tr>",$("#table tbody").append(html),Source.push(Alls[e]))})}DataX(Source);var Data_Index=$(this).attr("data-index");$(this).attr("data-index")>=1&&$.each($("[data-index]"),function(index,data){var ID=$(data).attr("id"),dataIndex=$(data).attr("data-index");(dataIndex>Data_Index||0==dataIndex)&&(DataX(Source),console.log(ProfessionalName),$("#"+ID).html("<option>请选择</option"),$.each(eval(ID),function(a,t){$("#"+ID).append("<option>"+t+"</option>")}))}),All=Source})}});