var myChart=echarts.init(document.getElementById("charts"));$.ajax({type:"get",url:"./data/output.json",async:!0,success:function(a){var e,t,o,r,n=[],s=[],i=[],d=[],l=[],h=[],p=[],m=[],u=[],y=[],g=[],c=null;$.each(a,function(a,e){s.push(e)});for(x=0;x<s.length;x++)n.push(s[x]),i.push(s[x].SchoolName);$("#SchoolName").html("");for(var x=0;x<i.length;x++)$.unique(i),i.sort(),$("#SchoolName").prepend("<option>"+i[x]+"</option>");$("#SchoolName").on("change","",function(){$("#MajorCategories").html(""),$("#ProfessionalCategory").html(""),$("#ProfessionalName").html(""),$("#table tbody").html(""),e=[],d=[];for(var a=$(this).val(),t=0;t<n.length;t++)n[t].SchoolName==a&&e.push(n[t]);for(o=0;o<e.length;o++)d.push(e[o].MajorCategories),c="<tr><td>"+e[o].ID+"</td><td>"+e[o].SchoolName+"</td><td>"+e[o].MajorCategories+"</td><td>"+e[o].ProfessionalCategory+"</td><td>"+e[o].ProfessionalName+"</td><td>"+e[o].SchoolSystem+"</td><td>"+e[o].Year+"</td><td>"+e[o].Graduate+"</td><td>"+e[o].Student+"</td><td>"+e[o].GradeOne+"</td><td>"+e[o].GradeTwo+"</td><td>"+e[o].GradeThree+"</td><td>"+e[o].GradeFour+"</td></tr>",$("#table tbody").append(c);$.unique(d);for(var o=0;o<d.length;o++)$("#MajorCategories").prepend("<option>"+d[o]+"</option>")}),$("#MajorCategories").on("click","",function(){$("#ProfessionalCategory").html(""),$("#ProfessionalName").html("");var a=$(this).val();t=[],l=[];for(var o=0;o<e.length;o++)e[o].MajorCategories==a&&t.push(e[o]);$("#table tbody").html("");for(var r=[],n=[],s=0;s<t.length;s++)r.push(t[s].Student),n.push(t[s].Graduate),l.push(t[s].ProfessionalCategory),c="<tr><td>"+t[s].ID+"</td><td>"+t[s].SchoolName+"</td><td>"+t[s].MajorCategories+"</td><td>"+t[s].ProfessionalCategory+"</td><td>"+t[s].ProfessionalName+"</td><td>"+t[s].SchoolSystem+"</td><td>"+t[s].Year+"</td><td>"+t[s].Graduate+"</td><td>"+t[s].Student+"</td><td>"+t[s].GradeOne+"</td><td>"+t[s].GradeTwo+"</td><td>"+t[s].GradeThree+"</td><td>"+t[s].GradeFour+"</td></tr>",$("#table tbody").append(c);$.unique(l);for(s=0;s<l.length;s++)$("#ProfessionalCategory").prepend("<option>"+l[s]+"</option>");console.log(l),option={title:{text:"专业与学校数",subtext:a},tooltip:{trigger:"axis"},legend:{data:["毕业生","在校生"]},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",axisLabel:{interval:0,rotate:30},data:l}],yAxis:[{type:"value"}],series:[{name:"毕业生",type:"bar",barMaxWidth:"40",data:n,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"在校生",type:"bar",barMaxWidth:"40",data:r,markPoint:{data:[{name:"年最高",value:182.2,xAxis:7,yAxis:183},{name:"年最低",value:2.3,xAxis:11,yAxis:3}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},myChart.setOption(option)}),$("#ProfessionalCategory").on("click","",function(){$("#ProfessionalName").html("");var a=$(this).val();o=[],h=[];for(var e=0;e<t.length;e++)t[e].ProfessionalCategory==a&&o.push(t[e]);for(var r=[],n=[],s=0;s<o.length;s++)r.push(o[s].Student),n.push(o[s].Graduate),h.push(o[s].ProfessionalName);$.unique(h);for(s=0;s<h.length;s++)$("#ProfessionalName").prepend("<option>"+h[s]+"</option>");option={title:{text:"专业与学校数",subtext:a},tooltip:{trigger:"axis"},legend:{data:["毕业生","在校生"]},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",axisLabel:{interval:0,rotate:30},data:h}],yAxis:[{type:"value"}],series:[{name:"毕业生",type:"bar",barMaxWidth:"40",data:n,markPoint:{data:[{type:"max",name:"最大值"},{type:"min",name:"最小值"}]},markLine:{data:[{type:"average",name:"平均值"}]}},{name:"在校生",type:"bar",barMaxWidth:"40",data:r,markPoint:{data:[{name:"年最高",value:182.2,xAxis:7,yAxis:183},{name:"年最低",value:2.3,xAxis:11,yAxis:3}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},myChart.setOption(option)}),$("#ProfessionalName").on("click","",function(){var a=$(this).val();r=[],p=[];for(var e=0;e<o.length;e++)o[e].ProfessionalName==a&&r.push(o[e]);for(var t=0;t<r.length;t++)p.push(r[t])}),$("#Grade").on("click","",function(){var a=$(this).val();g=[],y=[],u=[],m=[];for(var e=0;e<p.length;e++)"1"==a?m.push(p[e].GradeOne):"2"==a?m.push(p[e].GradeTwo):"3"==a?m.push(p[e].GradeThree):"4"==a&&m.push(p[e].GradeFour)}),$("#chartsType").on("change",function(){option={title:{text:"基于大数据的职业教育人才需求分析平台",subtext:"专业与学校数"},tooltip:{trigger:"axis"},color:["#c65c47","#24c5a4","#2e5c78","#4d9379"],legend:{data:["GradeOne"]},grid:{left:"10%",bottom:"15%"},toolbox:{show:!0,feature:{dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:["line","bar"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,xAxis:[{type:"category",axisLabel:{interval:0,rotate:30},data:function(){$("#Grade").val()}}],yAxis:[{type:"value"}],series:[{name:"GradeFour",type:"bar",data:m,markPoint:{data:[{name:"年最高",value:182.2,xAxis:7,yAxis:183},{name:"年最低",value:2.3,xAxis:11,yAxis:3}]},markLine:{data:[{type:"average",name:"平均值"}]}}]},myChart.setOption(option)})}});